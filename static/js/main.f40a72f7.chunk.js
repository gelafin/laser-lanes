(this["webpackJsonplaser-lanes"]=this["webpackJsonplaser-lanes"]||[]).push([[0],{17:function(t,e,i){},18:function(t,e,i){"use strict";i.r(e);var n=i(0),a=i(2),s=i.n(a),r=i(10),c=i.n(r),l=i(7),h=i(6),o=i.n(h),u=i(3),p=i(4),g=i(1),f=i(9),d=i(8),j=(i(17),o.a.mark(O));function v(t,e){return Math.floor(Math.random()*(e-t))+t}function S(t){var e="https://live.staticflickr.com/65535/50724769872_da72a3fd7c_t.jpg",i="https://live.staticflickr.com/65535/50724684336_aaa14d5649_t.jpg";return t.isAlly?Object(n.jsxs)("div",{className:"ship",children:[Object(n.jsx)(m,{isAlly:!0,laserState:t.state}),Object(n.jsx)("img",{src:t.isAlly?i:e})]}):Object(n.jsxs)("div",{className:"ship",children:[Object(n.jsx)("img",{src:t.isAlly?i:e}),Object(n.jsx)(m,{isAlly:!1,laserState:t.state})]})}function m(t){var e,i=t.laserState,a=t.isAlly;if("charging"===i)e=a?"https://live.staticflickr.com/65535/50723947808_9809886476_t.jpg":"https://live.staticflickr.com/65535/50724684381_4ca6f500da_t.jpg";else{if("firing"!==i)return Object(n.jsx)("div",{className:"laser"});e=a?"https://live.staticflickr.com/65535/50724684431_bffd593096_t.jpg":"https://live.staticflickr.com/65535/50723947768_2ab5054c24_t.jpg"}return Object(n.jsx)("img",{src:e,className:"laser"})}function y(t){t.ships[0].isAlly&&console.log("          in ShipRow ",t.ships[0].getState());var e=t.ships.map((function(t){return Object(n.jsx)(S,{isAlly:t.isAlly,state:t.getState()},t.getId())}));return Object(n.jsx)("ul",{className:"game-row",children:e})}function b(t){var e=t.output,i=Array.from(e),a=t.reactKeys.values(),s=i.map((function(t,e){return Object(n.jsx)("div",{column:e,children:t},a.next().value)}));t.outputCharKeys;return Object(n.jsx)("div",{className:"output-container",children:Object(n.jsx)("ul",{className:"game-text game-row",children:s})})}var x=function(t){Object(f.a)(i,t);var e=Object(d.a)(i);function i(t){var n;return Object(u.a)(this,i),(n=e.call(this,t)).handleChange=n.handleChange.bind(Object(g.a)(n)),n}return Object(p.a)(i,[{key:"handleChange",value:function(t){this.props.onInputChange(t.target.value)}},{key:"render",value:function(){return Object(n.jsx)("form",{className:"input-container game-text-container flex-container",children:Object(n.jsx)("input",{type:"text",value:this.props.input,className:"input-box game-text",onChange:this.handleChange})})}}]),i}(s.a.Component);function O(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:return e.next=4,"ship"+(t++).toString();case 4:e.next=1;break;case 6:case"end":return e.stop()}}),j)}var w=function(){function t(e,i){Object(u.a)(this,t),this.alive=!0,this.state="idle",this.id=i,this.isAlly=e}return Object(p.a)(t,[{key:"getState",value:function(){return this.state}},{key:"getId",value:function(){return this.id}},{key:"advanceState",value:function(){return"idle"===this.state?(console.log("in ShipObject::advanceState(): is idle, will charge"),this.state="charging",this.state):"charging"===this.state?(console.log("in ShipObject::advanceState(): is charging, will fire"),this.state="firing",this.state):(console.log("in ShipObject::advanceState(): is firing, will idle"),this.state="idle",this.state)}}]),t}(),k=function(t){Object(f.a)(i,t);var e=Object(d.a)(i);function i(t){var n;Object(u.a)(this,i);(n=e.call(this,t)).maxColumns=7,n.maxRows=5;var a=Array.from(new Array(7).keys()),s=O();return n.state={input:"testt",allyShips:new Array(7).fill().map((function(){return new w(!0,s.next().value)})),enemyShips:new Array(7).fill().map((function(){return new w(!1,s.next().value)})),allyShipStates:{firingShips:new Array,chargingShips:new Array,idleShips:Array.from(a)},enemyShipStates:{firingShips:new Array,chargingShips:new Array,idleShips:Array.from(a)}},n.handleInputChange=n.handleInputChange.bind(Object(g.a)(n)),n.tick=n.tick.bind(Object(g.a)(n)),n.advanceShipState=n.advanceShipState.bind(Object(g.a)(n)),n}return Object(p.a)(i,[{key:"advanceShipState",value:function(t,e){var i=t[e].advanceState(),n=t[e].isAlly?"allyShipStates":"enemyShipStates";"idle"===i?(this.state[n].idleShips.push(e),this.state[n].firingShips.pop(e)):"charging"===i?(this.state[n].chargingShips.push(e),this.state[n].idleShips.pop(e)):(this.state[n].firingShips.push(e),this.state[n].chargingShips.pop(e))}},{key:"tick",value:function(){var t=this;console.log("******ticking"),this.sfx.explosion.play().catch((function(){console.log("*****ERROR: audio play() promise rejected. Click into the text box--or else this is localhost")})),this.setState((function(e){var i=v(0,e.allyShipStates.idleShips.length),n=v(0,e.enemyShipStates.idleShips.length),a=Object(l.a)(e.allyShips);t.advanceShipState(a,i),console.log("     in setState(): setting state with this new ally ship: ",a[i]," in lane ",i);var s=Object(l.a)(e.enemyShips);return t.advanceShipState(s,n),console.log("     in setState(): setting state with this new enemy ship: ",a[n]," in lane ",n),{allyShips:a,enemyShips:s}}),(function(){console.log(" > finished setState!")}))}},{key:"componentDidMount",value:function(){var t=this;this.timerID=setInterval((function(){return t.tick()}),1e4),this.sfx={explosion:new Audio("./sfx/explosion.mp3"),chargingLaser:new Audio("./sfx/charging_laser.mp3"),firingLaser:new Audio("./sfx/firing_laser.mp3")},this.sfx.explosion.volume=.1,this.sfx.chargingLaser.volume=.1}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"handleInputChange",value:function(t){this.setState({input:t}),console.log("set input to ",t)}},{key:"render",value:function(){var t=this.maxColumns,e=new Array(t).fill(0).map((function(t,e){return e}));return console.log("     in render(): rendering shiprow with ",this.state.allyShips[0].getState()),Object(n.jsxs)("div",{className:"game-container flex-container",children:[Object(n.jsxs)("div",{className:"visuals-container",children:[Object(n.jsx)(y,{ships:this.state.enemyShips}),Object(n.jsx)(b,{output:this.state.input,reactKeys:e}),Object(n.jsx)(y,{ships:this.state.allyShips})]}),Object(n.jsx)("div",{children:Object(n.jsx)(x,{input:this.state.input,onInputChange:this.handleInputChange})})]})}}]),i}(s.a.Component),A=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,19)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,s=e.getLCP,r=e.getTTFB;i(t),n(t),a(t),s(t),r(t)}))};c.a.render(Object(n.jsx)(k,{}),document.getElementById("root")),A()}},[[18,1,2]]]);
//# sourceMappingURL=main.f40a72f7.chunk.js.map